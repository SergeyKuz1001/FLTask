# FLTask
Программа для вывода порождения слов языка корректных арифметических равенств в
десятичной системе счисления с суммой двух натуральных чисел в левой части.

## Запуск через docker
Для запуска программы в docker-контейнере необходимо сначала собрать контейнер:

```
$ docker build -t fltask .
```

Теперь программу можно запустить следующим образом:

```
$ docker run -it --rm fltask
```

## Запуск через stack

Для запуска программы через
[stack](https://docs.haskellstack.org/en/stable/README/) необходимо набрать
следующее:

```
$ stack run
```

## Использование
После запуска программы введите произвольную строку: если она принадлежит
описанному выше языку, программа выведет на экран вывод этой строки в
неограниченной и контестно-зависимых грамматиках, описаных ниже и в файлах
[grammar_0.txt](https://github.com/SergeyKuz1001/FLTask/blob/master/grammar_0.txt),
[grammar_1.txt](https://github.com/SergeyKuz1001/FLTask/blob/master/grammar_1.txt).

### Общее замечание

Продукции грамматик разделены по смысловым группам. Это было сделано для:

1) Возможности задания "стратегии" выполнения продукций для получения нужной
строки. Стратегии для каждой грамматики описаны в соответствующих файлах с
суффиксом `_st`

2) Облегчения понимания устройства грамматики

### Неограниченная грамматика

0) Начальная продукция
```
S -> Z 0 P 0 = 0 Z
```

1) Конечные продукции
```
Z ->
P -> +
```

2) Прибавление 1 левому слагаемому и сумме
```
P -> C P D
```

3) Прибавление 1 правому слагаемому и сумме
```
P -> P E
```

4) Прибавление 1
```
[0-8] C -> [1-9]
9 C -> C 0
Z C -> Z 1
P C -> P 1
= C -> = 1
```

5) Поиск конца суммы
```
D [0-9] -> [0-9] D
D = -> = D
D Z -> C Z
```

6) Поиск конца правого слагаемого
```
E [0-9] -> [0-9] E
E = -> C = D
```

### Контекстно-зависимая грамматика

Строки, где встречаются символы d, d', d-, d!, d!', d!-, d!!, d!!', d!!- или c, следует понимать как несколько однотипных строк, где вместо d в левой и правой частях стоит один и тот же нетерминал (если не указано иное), соответствующий одной из цифр 0-9 (или тем, что указаны в квадратных скобках), а вместо c -- терминал, соответсующей одной из цифр. Аналогично запись [a, b] .. -> [a, b] .. следует воспринимать как несколько продукций, где из множества в квадратных скобках выбиратеся и фиксируется в обоих частях один и тот же сивол.

Интуиция, стоящая за некоторыми из символов: d! -- крайняя левая во всех трёх числах, d!! -- крайняя правая цифра числа после "=". "'" -- инкремент, а "-" -- индикатор движения направо вправо (поиска крайнего символа числа после "=").


0. Начальная продукция 
```
S -> d[0]! A d[0]!!
```

1. Начало инкремента одного из чисел слева от "=" и справа
```
A -> A'
d A' -> d' A'
d! A' -> d!' A'
A' d! -> A' d!'-
A' d!! -> A' d!!-

B -> B'
d B' -> d' B'
d! B' -> d!' B'
B' d! -> B' d!'-
B' d!! -> B' d!!-

d' A' d!'- -> d' A'' d!'-
d' A' d!!- -> d' A'' d!!-

d' B' d!'- -> d' B'' d!'-
d' B' d!!- -> d' B'' d!!-

d!' A' d!'- -> d!' A'' d!'-
d!' A' d!!- -> d!' A'' d!!-

d!' B' d!'- -> d!' B'' d!'-
d!' B' d!!- -> d!' B'' d!!-
```

2. Завершение инкремента
```
d A'' d! -> d A d!
d A'' d!! -> d A d!!
d B'' d! -> d B d!
d B'' d!! -> d B d!!

d! A'' d! -> d! A d!
d! A'' d!! -> d! A d!!
d! B'' d! -> d! B d!
d! B'' d!! -> d! B d!!
```

3. Тело инкремента
```
d[0-8]' [A'', B'', d, d!!] -> d[1-9] [A'', B'', d, d!!]
d d[9]' [A'', B'', d, d!!] -> d' d[0] [A'', B'', d, d!!]

d[0-8]!' [A'', B'', d, d!!] -> d[1-9]! [A'', B'', d, d!!]
d! d[9]' [A'', B'', d, d!!] -> d!' d[0] [A'', B'', d, d!!]

[A'', B'', d, d!] d[0-8]!!' -> [A'', B'', d, d!] d[1-9]!!

[A'', B''] d[9]!' -> [A'', B''] d[1]! d[0]
d[9]!' [A'', B'', d, d!!] -> d[1]! d[0] [A'', B'', d, d!!]

d d[9]!!' -> d' d[0]!!
d! d[9]!!' -> d!' d[0]!!
A'' d[9]!!' -> A'' d[1]! d[0]!!
B'' d[9]!!' -> B'' d[1]! d[0]!!
```


4. Поиск крайнего символа в числе справа от "=" 
```
A'' d!!- -> A'' d!!'
B'' d!!- -> B'' d!!'
[A'', B''] d!'- d -> [A'', B''] d! d-
[A'', B''] d!'- d!! -> [A'', B''] d! d!!'
[d, d!] d- d -> [d, d!] d d-
[d, d!] d- d!! -> [d, d!] d d!!'
```

5. Терминальные символы арифметический операций
```
A -> + d[0]! B
B -> =
```

6. Терминальные символы цифр
```
d -> c
d! -> c
d!! -> c
```
